[user]
    name = Hiroshi Muraoka
    email = h.muraoka714@gmail.com

[alias]
    default = !gh repo view --json defaultBranchRef --jq .defaultBranchRef.name
    current = rev-parse --abbrev-ref HEAD
    top = rev-parse --shrootow-toplevel

    amend = commit --amend
    a = add
    u = add -u
    bd = branch -D
    ci = commit -sS
    co = checkout HEAD
    cl = checkout HEAD
    cm = commit -sS -m
    d = diff
    ds = diff --staged
    e = !nvim ~/.gitconfig
    empty = commit --allow-empty -sS -m "empty"
    f = fetch
    fo = fetch origin
    fd = !fd
    g = !git grep -n
    gg = grep -n
    h = show
    hard = reset --hard
    l = log --graph --decorate --abbrev-commit --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'
    o = open
    op = stash pop
    po = push
    pf = push --force-with-lease
    pi = !git pull origin $(git rev-parse --abbrev-ref HEAD)
    k = cherry-pick
    ka = cherry-pick --abort
    kc = cherry-pick --continue
    pr = !git push && gh pr create -a tapih -d
    prr = !git push && gh pr create -a tapih
    rb = rebase
    rf = !git rebase origin/$(git branch --show-current)
    ra = rebase --abort
    rc = rebase --continue
    mg = merge
    ma = merge --abort
    mc = merge --continue
    v = !gh pr view --web
    vv = !gh browse -b $(git current-branch)
    vm = !gh browse
    s = status -s
    ss = status
    ts = stash
    w = switch
    c = "!f(){ git switch -c tapih/$1; }; f"
    cl = clean -fd
    t = "!gtw"
    tr = worktree remove

    # open issue
    I = !gh issue list --search 'involves:@me' -L 100 | fzf --height 90% --preview 'gh issue view {+1}' | awk '{print $1}' | xargs gh issue view --web

    # open PR
    P = "!f() { gh pr list --search 'involves:@me' -L 100 --json number,headRefName,title,updatedAt --template '{{range .}}{{tablerow (printf \"#%v\" .number | autocolor \"green\") .headRefName .title (timeago .updatedAt)}}{{end}}' | fzf --height 90% --preview 'gh pr diff --color=always {+1}' | awk '{print $1}' | xargs gh pr view --web; };f"

    # switch branch
    b = "!f() { gh pr list --search 'involves:@me' -L 100 --json number,headRefName,title,updatedAt --template '{{range .}}{{tablerow (printf \"#%v\" .number | autocolor \"green\") .headRefName .title (timeago .updatedAt)}}{{end}}' | fzf --height 90% --preview 'gh pr diff --color=always {+1}' | awk '{print $2}' | xargs git switch; }; f"

    ours = checkout --ours
    theirs = checkout --theirs

    m = "!f(){ git checkout $(git default) $@;}; f"
    mr = "!f(){ git pull --rebase --autostash origin $(git default) $@;}; f"

    lprune = "!f(){ B=$(git default); git switch ${B}; git branch --format='%(refname:short)' --merged=${B} | grep -v \"^${B}$\" | xargs -n 1 git branch -D; }; f"
    rprune = fetch --prune

[init]
    defaultBranch = main

[core]
    editor = vim
    autocrlf= false
    sparseCheckout = true
    pager = delta
    diff = delta
    log = delta
    reflog = delta
    show = delta

[delta]
    width = variable
    true-color = always
    dark = true
    light = false
    features = line-numbers decorations
    syntax-theme = Monokai Extended
    navigate = true
    line-numbers = true
    side-by-side = false
    wrap = true

[pull]
    ff = only
    rebase = false

[push]
    default = current
    autoSetupRemote = true

[include]
    path = ~/.gitconfig.local

[diff]
    tool = vimdiff

[difftool]
    prompt = false

[merge]
    ff = false

[log]
    date = iso

[ghq]
    root=~/.ghq
    root=~/src

[url "https://github.com/"]
    insteadOf = git@github.com:

[rebase]
	autostash = true
	abbreviateCommands = true
	autosquash = true

